(function(n){var e={fonts:{},parseFont:function(n,r){if(e.fonts.hasOwnProperty(n)){r();return}e.loadFont(n,function(t){e._parseFont(n,t,r)})},_parseFont:function(n,r,t){var h=r.split("\n"),a=h[0].split(" "),f=a[0].charAt(a[0].length-1),o=+a[1],i=+a[5];e.fonts[n]={defn:h.slice(i+1),hardblank:f,height:o,char_obj:{}};t()},parseChar:function(n,r){var t=e.fonts[r];if(t.char_obj.hasOwnProperty(n)){return t.char_obj[n]}var h=t.height,a=(n-32)*h,f=[],o,i,l;if(n>=160){i=n;if(n>255){i="0x0*"+n.toString(16)}l=new RegExp("^"+i,"i");for(o=0;o<t.defn.length;++o){if(t.defn[o].match(l)){a=o+1;break}}}for(o=0;o<h;o++){f[o]=t.defn[a+o].replace(/@/g,"").replace(RegExp("\\"+t.hardblank,"g")," ")}t.char_obj[n]=f;return t.char_obj[n]},parsePhrase:function(n,r,t){var h=[],a=[],f=[],o,i,l,p,c,s,g,u=[];if(!n){t(h);return}e.parseFont(r,function(){var d=[],b=[],F,_,v=[];for(s=0;s<n.length;s++){if(n.charCodeAt(s)===13||n.charCodeAt(s)===10){v.push(s)}}n=n.replace(/\r?\n|\r/g," ");for(o=0;o<n.length;o++){d[o]=e.parseChar(n.charCodeAt(o),r);if(n.charCodeAt(o)===32){b.push(o);g=d[o][0].length}}F=d[0].length;for(i=0;i<F;i++){_=[];for(l=0;l<n.length;l++){if(i===0&&b.indexOf(l)>-1){a.push(_.length)}if(i===0&&v.indexOf(l)>-1){f.push(_.length)}_=_.concat(d[l][i].split(""))}h.push(_)}for(p=0;p<h.length;p++){for(c=0;c<h[p].length;c++){if(h[p][c]!==" "){u[p]=c;break}}}if(u.length>0){for(p=0;p<h.length;p++){h[p]=h[p].splice(Math.min.apply(Math,u))}}f.push(h[0].length);t(h,a,g,f)})}};if(n.Figlet===undefined){n.Figlet=e}})(window);